<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Login & Signup Form GZBOT</title>
<link rel="stylesheet" href="./login/style.css">
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-auth.js"></script>
<!-- Agregar SweetAlert -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- Agregar FontAwesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
  /* Bloquear click derecho */
  body {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
</style>
</head>
<body>
<!-- partial:index.partial.html -->
<div class="wrapper">
<div class="title-text">
<div class="title login"><i class="fa-brands fa-bots fa-bounce"></i> Login GZ330-BOT</div>
<div class="title signup"><i class="fa-brands fa-bots fa-bounce"></i> Signup GZ330-BOT</div>
</div>
<div class="form-container">
<div class="slide-controls">
<input type="radio" name="slide" id="login" checked>
<input type="radio" name="slide" id="signup">
<label for="login" class="slide login">Iniciar sesión</label>
<label for="signup" class="slide signup">Registrarse</label>
<div class="slider-tab"></div>
</div>
<div class="form-inner">
<form action="#" class="login" onsubmit="return login()">
<div class="field">
<input type="text" id="login-email" placeholder="Email Address" required>
</div>
<div class="field">
<input type="password" id="login-password" placeholder="Password" required>
</div>
<div class="pass-link"><a href="wa.link/9gfv07">Olvidaste tu contraseña?</a></div>
<div class="field btn">
<div class="btn-layer"></div>
<input type="submit" value="Login">
</div>
<div class="signup-link">Aún no eres miembro?? <a href="#">registrate ahora</a></div>
</form>
<form action="#" class="signup" onsubmit="return signup()">
<div class="field">
<input type="text" id="signup-email" placeholder="Email Address" required>
</div>
<div class="field">
<input type="password" id="signup-password" placeholder="Password" required>
</div>
<div class="field">
<input type="password" id="signup-confirm-password" placeholder="Confirm password" required>
</div>
<!-- Agregar input para el nombre de usuario -->
<div class="field">
<input type="text" id="username" placeholder="Username" required>
</div>
<div class="field btn">
<div class="btn-layer"></div>
<input type="submit" value="Signup">
</div>
</form>
</div>
</div>
</div>
<!-- partial -->
<script>
// Archivo: script.js

// Initialize Firebase
var config = {
  apiKey: "AIzaSyCqsYZA9wU9Y1YvYGicdZQ_7DDzfEVLXDU",
  authDomain: "number-ac729.firebaseapp.com",
  projectId: "number-ac729",
  storageBucket: "number-ac729.appspot.com",
  messagingSenderId: "36610055964",
  appId: "1:36610055964:web:ec80cc7ea2fb23287ce4d9",
  measurementId: "G-0BTNK7VNM3"
};

firebase.initializeApp(config);

// Función para iniciar sesión
function login() {
var email = document.getElementById("login-email").value;
var password = document.getElementById("login-password").value;

firebase.auth().signInWithEmailAndPassword(email, password)
.then(function() {
alert("Inicio de sesión exitoso");
return false; // Detiene el envío del formulario
})
.catch(function(error) {
var errorCode = error.code;
var errorMessage = error.message;
if (errorCode === "auth/wrong-password") {
Swal.fire("Contraseña incorrecta");
} else {
Swal.fire("Error durante el inicio de sesión");
}
return false; // Detiene el envío del formulario
});
}

// Función para registrarse
function signup() {
var email = document.getElementById("signup-email").value;
var password = document.getElementById("signup-password").value;
var confirmPassword = document.getElementById("signup-confirm-password").value;
var username = document.getElementById("username").value;

if (password !== confirmPassword) {
Swal.fire("Las contraseñas no coinciden");
return false; // Detiene el envío del formulario
}

// Verificar si el nombre de usuario tiene más de 8 caracteres
if (username.length < 8) {
Swal.fire("El nombre de usuario debe tener al menos 8 caracteres");
return false; // Detiene el envío del formulario
}

firebase.auth().createUserWithEmailAndPassword(email, password)
.then(function() {
alert("Registro exitoso, ahora puedes iniciar sesión");
return false; // Detiene el envío del formulario
})
.catch(function(error) {
var errorCode = error.code;
var errorMessage = error.message;
if (errorCode === "auth/weak-password") {
Swal.fire("La contraseña es débil, asegurate de ingresar una contraseña lo suficientemente fuerte");
} else {
Swal.fire("Error durante el registro");
}
return false; // Detiene el envío del formulario
});
}


firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
    // El usuario ha iniciado sesión, redirigir a gz330.html
    window.location.href = "gz330.html";
  } else {
    // El usuario no ha iniciado sesión
  }
});

document.oncontextmenu = function () { return false }
    document.addEventListener("dragstart", function (event) {
      event.preventDefault();
    });

    document.addEventListener('keydown', function (event) {
      if (event.ctrlKey && (event.key === 'u' || event.key === 'U')) {
        event.preventDefault();
        Swal.fire(
          'Sin acceso?',
          'Lo Siento pero no tienes permiso',
          'question'
        )
      }
    });
</script>
</body>
<script src="./login/script.js"></script>
</html>
